<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Aavaaz - Voice Memory Companion</title><style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Segoe UI',Tahoma,Geneva;background:#f5f5f5}.navbar{background:rgba(0,0,0,0.8);padding:15px 30px;display:flex;justify-content:space-between;align-items:center;color:white}.navbar h1{font-size:24px}.nav-links{display:flex;gap:20px;align-items:center}.nav-links a,.nav-links button{color:white;text-decoration:none;background:0;border:0;cursor:pointer;font-size:14px}.logout-btn{background:#ff4757;padding:8px 16px;border-radius:4px}.home-page{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:calc(100vh - 60px);text-align:center;color:white;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%)}.home-page h1{font-size:48px;margin-bottom:20px}.home-page p{font-size:18px;margin-bottom:30px}.btn-primary{background:#4CAF50;color:white;padding:12px 30px;border:0;border-radius:6px;cursor:pointer;font-weight:bold;transition:all 0.3s}.btn-primary:hover{background:#45a049}.dashboard-page{display:none;padding:20px}.dashboard-page.active{display:grid;grid-template-columns:250px 1fr;gap:20px}.sidebar{background:white;border-radius:8px;padding:20px;box-shadow:0 2px 8px rgba(0,0,0,0.1)}.sidebar h3{margin-bottom:15px;color:#333}.sidebar a{display:block;padding:12px;margin-bottom:10px;background:#f0f0f0;border-radius:4px;cursor:pointer;color:#333;transition:all 0.3s}.sidebar a:hover{background:#667eea;color:white}.sidebar a.active{background:#667eea;color:white}.content-area{background:white;border-radius:8px;padding:30px;box-shadow:0 2px 8px rgba(0,0,0,0.1)}.content-section{display:none}.content-section.active{display:block}.section-title{font-size:28px;color:#333;margin-bottom:20px}.btn-record{background:#667eea;color:white;padding:15px 40px;border:0;border-radius:4px;cursor:pointer;margin-bottom:20px;font-weight:bold}.btn-record.recording{background:#ff4757;animation:pulse 1s infinite}.conversation-container{max-width:800px;margin:0 auto}.voice-setup{background:#f0f7ff;padding:20px;border-radius:8px;margin-bottom:20px;border-left:4px solid #667eea}.voice-setup h3{margin-bottom:15px;color:#333}.voice-setup p{color:#666;margin-bottom:10px;font-size:14px}.input-group{margin-bottom:15px}.input-group label{display:block;margin-bottom:5px;font-weight:bold;color:#333}.input-group input,.input-group textarea{width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;font-family:inherit}.conversation-history{background:#fff9e6;padding:15px;border-radius:8px;margin-bottom:20px;min-height:150px;max-height:400px;overflow-y:auto;border:1px solid #ddd}.message{margin-bottom:15px;padding:10px;border-radius:6px}.message.user{background:#667eea;color:white;margin-left:20px}.message.grok{background:#e8f5e9;color:#333;margin-right:20px;border-left:4px solid #4CAF50}.audio-player{margin-top:10px;display:flex;align-items:center;gap:10px}.status-text{font-size:12px;color:#999;margin-top:5px}.voice-section{margin-bottom:20px}.voice-section h4{margin-bottom:10px;color:#333;font-size:16px}.btn-accept,.btn-reject{background:#4CAF50;color:white;padding:10px 20px;border:0;border-radius:4px;cursor:pointer;margin-right:10px;font-weight:bold}.btn-reject{background:#ff4757}.btn-accept:hover{background:#45a049}.btn-reject:hover{background:#ff3838}@keyframes pulse{0%,100%{opacity:1}50%{opacity:0.7}}</style></head><body><div class="navbar"><h1>Aavaaz</h1><div class="nav-links"><a href="#home">Home</a><a href="#privacy">Privacy</a><button class="logout-btn" id="logoutBtn" style="display:none">Logout</button></div></div><div id="homePage" class="home-page"><h1>Aavaaz - Voice Memory Companion</h1><p>Record your loved one's voice and have intimate conversations</p><button class="btn-primary" onclick="showLoginModal()">Start Free Pilot</button></div><div id="dashboardPage" class="dashboard-page"><div class="sidebar"><h3>Navigation</h3><a onclick="switchSection('voice-memory','this')" class="nav-item active">Voice Memory Conversation</a><a onclick="switchSection('my-recordings','this')" class="nav-item">My Recordings</a><a onclick="switchSection('calendar','this')" class="nav-item">Calendar</a><a onclick="switchSection('settings','this')" class="nav-item">Settings</a></div><div class="content-area"><div id="voice-memory-section" class="content-section active"><div class="conversation-container"><h2 class="section-title">Voice Memory Conversation</h2><div class="voice-setup"><h3>1. Setup Your Reference Voice</h3><p>Record a reference voice (could be your loved one or yourself)</p><div class="voice-section"><h4>Upload MP3 File</h4><input type="file" id="uploadFile" accept="audio/mp3,.mp3" style="margin-bottom:10px"><button class="btn-record" onclick="handleFileUpload()">Upload</button><div id="uploadStatus" class="status-text"></div></div><div id="audioPlaybackSection" style="display:none;margin-bottom:20px"><h4>Playback</h4><audio id="audioPlayer" controls style="width:100%;margin-bottom:10px"></audio><div><button class="btn-accept" onclick="acceptVoice()">âœ“ Accept Voice</button><button class="btn-reject" onclick="rejectVoice()">âœ• Reject Voice</button></div></div><p style="margin-top:15px" id="refVoiceStatus">No reference voice set</p></div><div class="voice-setup"><h3>2. Have a Conversation</h3><p>Speak naturally about your memories, and Grok will respond with emotional intelligence using the reference voice</p><div class="input-group"><label for="userInput">What would you like to say?</label><textarea id="userInput" placeholder="Share your memory..."></textarea></div><button class="btn-record" onclick="sendVoiceMessage()">ðŸ’¬ Send & Get Response</button></div><div id="conversationHistory" class="conversation-history"></div></div></div><div id="my-recordings-section" class="content-section"><h2 class="section-title">My Recordings</h2><p>Your saved conversations will appear here</p></div><div id="calendar-section" class="content-section"><h2 class="section-title">Calendar</h2><p>Schedule your voice conversations or important dates</p></div><div id="settings-section" class="content-section"><h2 class="section-title">Settings</h2><p>Manage your preferences and account settings</p></div></div></div><div id="loginModal" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);z-index:1000;align-items:center;justify-content:center"><div style="background:white;padding:30px;border-radius:8px;width:90%;max-width:400px"><h2>Login</h2><div class="input-group"><label for="emailInput">Email</label><input type="email" id="emailInput" placeholder="Email"></div><div class="input-group"><label for="passwordInput">Password</label><input type="password" id="passwordInput" placeholder="Password"></div><button class="btn-primary" onclick="login()">Login</button><button class="btn-primary" onclick="showSignupModal()">Sign Up</button><button class="btn-primary" onclick="hideModals()">Close</button></div></div><div id="signupModal" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);z-index:1000;align-items:center;justify-content:center"><div style="background:white;padding:30px;border-radius:8px;width:90%;max-width:400px"><h2>Sign Up</h2><div class="input-group"><label for="nameInput">Name</label><input type="text" id="nameInput" placeholder="Name"></div><div class="input-group"><label for="signupEmailInput">Email</label><input type="email" id="signupEmailInput" placeholder="Email"></div><div class="input-group"><label for="signupPasswordInput">Password</label><input type="password" id="signupPasswordInput" placeholder="Password"></div><button class="btn-primary" onclick="signup()">Sign Up</button><button class="btn-primary" onclick="hideModals()">Close</button></div></div><script>let currentUser=null;let isRecording=false;let mediaRecorder=null;let audioChunks=[];let referenceVoiceId=null;let conversation=[];function initApp(){const user=localStorage.getItem('currentUser');if(user){currentUser=user;showDashboard();loadReferenceVoice()}else{showHome()}}function showLoginModal(){document.getElementById('loginModal').style.display='flex'}function showSignupModal(){document.getElementById('signupModal').style.display='flex'}function hideModals(){document.getElementById('loginModal').style.display='none';document.getElementById('signupModal').style.display='none'}function login(){const email=document.getElementById('emailInput').value;const password=document.getElementById('passwordInput').value;if(email&&password){localStorage.setItem('currentUser',email);currentUser=email;hideModals();showDashboard();loadReferenceVoice()}}function signup(){const name=document.getElementById('nameInput').value;const email=document.getElementById('signupEmailInput').value;const password=document.getElementById('signupPasswordInput').value;if(name&&email&&password){localStorage.setItem('currentUser',email);currentUser=email;hideModals();showDashboard();loadReferenceVoice()}}function logout(){localStorage.removeItem('currentUser');currentUser=null;showHome()}function showHome(){document.getElementById('homePage').style.display='flex';document.getElementById('dashboardPage').classList.remove('active');document.getElementById('logoutBtn').style.display='none'}function showDashboard(){document.getElementById('homePage').style.display='none';document.getElementById('dashboardPage').classList.add('active');document.getElementById('logoutBtn').style.display='block'}function switchSection(section,element){document.querySelectorAll('.content-section').forEach(s=>s.classList.remove('active'));document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active'));document.getElementById(section+'-section').classList.add('active');element.classList.add('active')}function handleFileUpload(){const fileInput=document.getElementById('uploadFile');const file=fileInput.files[0];if(!file){alert('Please select a file');return}const reader=new FileReader();reader.onload=function(e){const audioData=e.target.result;document.getElementById('audioPlayer').src=audioData;document.getElementById('audioPlaybackSection').style.display='block';document.getElementById('uploadStatus').textContent='Audio uploaded and ready for playback'};reader.readAsDataURL(file)}function acceptVoice(){const audioPlayer=document.getElementById('audioPlayer');const audioUrl=audioPlayer.src;if(!audioUrl){alert('No audio to accept');return}localStorage.setItem('referenceVoice_'+currentUser,audioUrl);referenceVoiceId='savedVoice';document.getElementById('refVoiceStatus').textContent='âœ“ Reference voice set! Ready to have conversations.';document.getElementById('uploadStatus').textContent='Voice accepted and saved!'}function rejectVoice(){document.getElementById('uploadFile').value='';document.getElementById('audioPlayer').src='';document.getElementById('audioPlaybackSection').style.display='none';document.getElementById('uploadStatus').textContent='Voice rejected. Please upload another.'}function loadReferenceVoice(){const saved=localStorage.getItem('referenceVoice_'+currentUser);if(saved){referenceVoiceId='savedVoice';document.getElementById('refVoiceStatus').textContent='âœ“ Reference voice loaded'}}function sendVoiceMessage(){const userInput=document.getElementById('userInput').value;if(!userInput){alert('Please enter your message');return}if(!referenceVoiceId){alert('Please record a reference voice first');return}const historyDiv=document.getElementById('conversationHistory');const userMsg=document.createElement('div');userMsg.className='message user';userMsg.textContent='You: '+userInput;historyDiv.appendChild(userMsg);historyDiv.scrollTop=historyDiv.scrollHeight;document.getElementById('userInput').value='';const grokMsg=document.createElement('div');grokMsg.className='message grok';grokMsg.innerHTML='Grok: <em>Generating response...</em>';historyDiv.appendChild(grokMsg);fetch('/api/generate-story',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({user:currentUser,userInput:userInput,voiceId:referenceVoiceId})}).then(r=>r.json()).then(data=>{if(data.success){grokMsg.innerHTML='Grok: '+data.response;if(data.audio){const audio=new Audio(data.audio);audio.play().catch(e=>console.error('Playback error:',e))}conversation.push({user:userInput,grok:data.response})}else{grokMsg.innerHTML='Grok: '+data.error}historyDiv.scrollTop=historyDiv.scrollHeight}).catch(e=>{grokMsg.innerHTML='Grok: Error - '+e.message;historyDiv.scrollTop=historyDiv.scrollHeight})}document.addEventListener('DOMContentLoaded',initApp)</script></body></html>
