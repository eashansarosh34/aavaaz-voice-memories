<div class="voice-setup"><h3>1. Setup Your Reference Voice</h3><p>Record a reference voice (could be your loved one or yourself)</p><div style="display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:20px"><div><h4 style="margin-bottom:10px;color:#333;font-size:16px">ğŸ“ Record Audio</h4><button class="btn-record" id="refVoiceBtn" onclick="toggleReferenceRecording()">ğŸ™ï¸ Record Voice</button><p class="status-text" id="refVoiceStatus">Ready to record</p></div><div><h4 style="margin-bottom:10px;color:#333;font-size:16px">ğŸ“‚ Upload Audio</h4><input type="file" id="voiceUploadFile" accept="audio/*" onchange="handleVoiceUpload(event)" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;margin-bottom:10px"><p class="status-text" id="uploadStatus">Ready to upload</p></div></div><div style="background:#fff;padding:20px;border-radius:8px;margin-top:20px;border:1px solid #ddd" id="voicePlayerSection" style="display:none"><h4 style="margin-bottom:15px;color:#333">ğŸ”Š Your Saved Voice</h4><audio id="voicePlayer" style="width:100%;margin-bottom:15px" controls></audio><div style="display:flex;gap:10px"><button class="btn-record" style="background:#4CAF50;flex:1" onclick="acceptVoiceClone()">âœ“ Accept & Clone Voice</button><button class="btn-record" style="background:#ff6b6b;flex:1" onclick="rejectVoiceClone()">âœ— Reject & Record Again</button></div></div></div>function handleVoiceUpload(event){const file=event.target.files[0];if(!file){return}const reader=new FileReader();reader.onload=function(e){const audioData=e.target.result;localStorage.setItem('referenceVoice_'+currentUser,audioData);referenceVoiceId='savedVoice';showVoicePlayer(audioData);document.getElementById('uploadStatus').textContent='âœ“ Audio uploaded successfully!'}}reader.readAsDataURL(file)}function showVoicePlayer(audioData){document.getElementById('voicePlayerSection').style.display='block';const player=document.getElementById('voicePlayer');player.src=audioData}function acceptVoiceClone(){referenceVoiceId='savedVoice';document.getElementById('refVoiceStatus').textContent='âœ“ Reference voice set! Ready to have conversations.';document.getElementById('voicePlayerSection').style.display='none'}function rejectVoiceClone(){localStorage.removeItem('referenceVoice_'+currentUser);referenceVoiceId=null;document.getElementById('refVoiceStatus').textContent='Voice rejected. Record or upload again.';document.getElementById('voicePlayerSection').style.display='none';document.getElementById('voiceUploadFile').value='';document.getElementById('refVoiceBtn').textContent='ğŸ™ï¸ Record Voice'}
