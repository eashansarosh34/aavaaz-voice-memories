<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Aavaaz - Voice Memory Companion</title><style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Segoe UI',Tahoma,Geneva;background:#f5f5f5}.navbar{background:rgba(0,0,0,0.8);padding:15px 30px;display:flex;justify-content:space-between;align-items:center;color:white}.navbar h1{font-size:24px}.nav-links{display:flex;gap:20px;align-items:center}.nav-links a,.nav-links button{color:white;text-decoration:none;background:0;border:0;cursor:pointer;font-size:14px}.logout-btn{background:#ff4757;padding:8px 16px;border-radius:4px}.home-page{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:calc(100vh - 60px);text-align:center;color:white;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%)}.home-page h1{font-size:48px;margin-bottom:20px}.home-page p{font-size:18px;margin-bottom:30px}.btn-primary{background:#4CAF50;color:white;padding:12px 30px;border:0;border-radius:6px;cursor:pointer;font-weight:bold;transition:all 0.3s}.btn-primary:hover{background:#45a049}.dashboard-page{display:none;padding:20px}.dashboard-page.active{display:grid;grid-template-columns:250px 1fr;gap:20px}.sidebar{background:white;border-radius:8px;padding:20px;box-shadow:0 2px 8px rgba(0,0,0,0.1)}.sidebar h3{margin-bottom:15px;color:#333}.sidebar a{display:block;padding:12px;margin-bottom:10px;background:#f0f0f0;border-radius:4px;cursor:pointer;color:#333;transition:all 0.3s}.sidebar a:hover{background:#667eea;color:white}.sidebar a.active{background:#667eea;color:white}.content-area{background:white;border-radius:8px;padding:30px;box-shadow:0 2px 8px rgba(0,0,0,0.1)}.content-section{display:none}.content-section.active{display:block}.section-title{font-size:28px;color:#333;margin-bottom:20px}.btn-record{background:#667eea;color:white;padding:15px 40px;border:0;border-radius:4px;cursor:pointer;margin-bottom:20px;font-weight:bold}.btn-record.recording{background:#ff4757;animation:pulse 1s infinite}.conversation-container{max-width:800px;margin:0 auto}.voice-setup{background:#f0f7ff;padding:20px;border-radius:8px;margin-bottom:20px;border-left:4px solid #667eea}.voice-setup h3{margin-bottom:15px;color:#333}.voice-setup p{color:#666;margin-bottom:10px;font-size:14px}.input-group{margin-bottom:15px}.input-group label{display:block;margin-bottom:5px;font-weight:bold;color:#333}.input-group input,.input-group textarea{width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;font-family:inherit}.conversation-history{background:#fff9e6;padding:15px;border-radius:8px;margin-bottom:20px;min-height:150px;max-height:400px;overflow-y:auto;border:1px solid #ddd}.message{margin-bottom:15px;padding:10px;border-radius:6px}.message.user{background:#667eea;color:white;margin-left:20px}.message.grok{background:#e8f5e9;color:#333;margin-right:20px;border-left:4px solid #4CAF50}.audio-player{margin-top:10px;display:flex;align-items:center;gap:10px}.status-text{font-size:12px;color:#999;margin-top:5px}@keyframes pulse{0%,100%{opacity:1}50%{opacity:0.7}}</style></head><body><div class="navbar"><h1>Aavaaz</h1><div class="nav-links"><a href="#">Home</a><a href="#">Privacy</a><button class="logout-btn" onclick="logout()">Logout</button></div></div><div class="home-page" id="homePage"><h1>Aavaaz - Voice Memory Companion</h1><p>Record your loved one's voice and have intimate conversations</p><button class="btn-primary" onclick="showLoginModal()">Start Free Pilot</button></div><div class="dashboard-page" id="dashboardPage"><div class="sidebar"><h3>Navigation</h3><a class="nav-item active" onclick="switchSection('voice-conversation',this)">üé§ Voice Conversation</a><a class="nav-item" onclick="switchSection('recordings',this)">üìù My Recordings</a><a class="nav-item" onclick="switchSection('calendar',this)">üìÖ Calendar</a><a class="nav-item" onclick="switchSection('settings',this)">‚öôÔ∏è Settings</a></div><div class="content-area"><div class="content-section active" id="voice-conversation-section"><h2 class="section-title">Voice Memory Conversation</h2><div class="conversation-container"><div class="voice-setup"><h3>1. Setup Your Reference Voice</h3><p>Record a reference voice (could be your loved one or yourself)</p><button class="btn-record" id="refVoiceBtn" onclick="toggleReferenceRecording()">üéôÔ∏è Record Reference Voice</button><div id="refVoiceStatus" class="status-text"></div></div><div class="voice-setup"><h3>2. Have a Conversation</h3><p>Speak naturally about your memories, and Grok will respond with emotional intelligence using the reference voice</p><div class="input-group"><label>What would you like to say?</label><textarea id="userInput" placeholder="Share your thoughts, memories, or feelings..." rows="3"></textarea></div><button class="btn-record" onclick="sendVoiceMessage()">üí¨ Send & Get Response</button></div><div class="conversation-history" id="conversationHistory"></div></div></div><div class="content-section" id="recordings-section"><h2 class="section-title">My Recordings</h2><div id="recordingsList"></div></div><div class="content-section" id="calendar-section"><h2 class="section-title">Calendar</h2></div><div class="content-section" id="settings-section"><h2 class="section-title">Settings</h2></div></div></div><div id="loginModal" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);z-index:1000"><div style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:white;padding:40px;border-radius:8px;box-shadow:0 4px 20px rgba(0,0,0,0.2);width:90%;max-width:400px"><h2>Login</h2><input type="email" id="emailInput" placeholder="Email" style="width:100%;padding:10px;margin:10px 0;border:1px solid #ddd;border-radius:4px"><input type="password" id="passwordInput" placeholder="Password" style="width:100%;padding:10px;margin:10px 0;border:1px solid #ddd;border-radius:4px"><button onclick="login()" style="width:100%;padding:12px;background:#667eea;color:white;border:0;border-radius:4px;cursor:pointer;margin:10px 0">Login</button><button onclick="showSignupModal()" style="width:100%;padding:12px;background:#f0f0f0;color:#333;border:0;border-radius:4px;cursor:pointer">Sign Up</button></div></div><div id="signupModal" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);z-index:1000"><div style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:white;padding:40px;border-radius:8px;box-shadow:0 4px 20px rgba(0,0,0,0.2);width:90%;max-width:400px"><h2>Sign Up</h2><input type="text" id="nameInput" placeholder="Name" style="width:100%;padding:10px;margin:10px 0;border:1px solid #ddd;border-radius:4px"><input type="email" id="signupEmailInput" placeholder="Email" style="width:100%;padding:10px;margin:10px 0;border:1px solid #ddd;border-radius:4px"><input type="password" id="signupPasswordInput" placeholder="Password" style="width:100%;padding:10px;margin:10px 0;border:1px solid #ddd;border-radius:4px"><button onclick="signup()" style="width:100%;padding:12px;background:#667eea;color:white;border:0;border-radius:4px;cursor:pointer;margin:10px 0">Sign Up</button></div></div><script>let currentUser=null;let isRecording=false;let mediaRecorder=null;let audioChunks=[];let referenceVoiceId=null;let conversation=[];function initApp(){const user=localStorage.getItem('currentUser');if(user){currentUser=user;showDashboard();loadReferenceVoice()}else{showHome()}}function showLoginModal(){document.getElementById('loginModal').style.display='block'}function showSignupModal(){document.getElementById('signupModal').style.display='block';document.getElementById('loginModal').style.display='none'}function hideModals(){document.getElementById('loginModal').style.display='none';document.getElementById('signupModal').style.display='none'}function login(){const email=document.getElementById('emailInput').value;const password=document.getElementById('passwordInput').value;if(email&&password){localStorage.setItem('currentUser',email);currentUser=email;hideModals();showDashboard();loadReferenceVoice()}}function signup(){const name=document.getElementById('nameInput').value;const email=document.getElementById('signupEmailInput').value;const password=document.getElementById('signupPasswordInput').value;if(name&&email&&password){localStorage.setItem('currentUser',email);currentUser=email;hideModals();showDashboard();loadReferenceVoice()}}function logout(){localStorage.removeItem('currentUser');currentUser=null;showHome()}function showHome(){document.getElementById('homePage').style.display='flex';document.getElementById('dashboardPage').classList.remove('active')}function showDashboard(){document.getElementById('homePage').style.display='none';document.getElementById('dashboardPage').classList.add('active')}function switchSection(section,element){document.querySelectorAll('.content-section').forEach(s=>s.classList.remove('active'));document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active'));document.getElementById(section+'-section').classList.add('active');element.classList.add('active')}function toggleReferenceRecording(){const btn=document.getElementById('refVoiceBtn');const status=document.getElementById('refVoiceStatus');if(!isRecording){isRecording=true;btn.textContent='‚èπÔ∏è Stop Recording';status.textContent='Recording...';startRecording()}else{isRecording=false;btn.textContent='üéôÔ∏è Record Reference Voice';status.textContent='Reference voice saved!';stopRecording();saveReferenceVoice()}}function startRecording(){navigator.mediaDevices.getUserMedia({audio:true}).then(stream=>{mediaRecorder=new MediaRecorder(stream);audioChunks=[];mediaRecorder.ondataavailable=e=>audioChunks.push(e.data);mediaRecorder.start()}).catch(err=>alert('Microphone access denied'))}function stopRecording(){if(mediaRecorder)mediaRecorder.stop()}function saveReferenceVoice(){const audioBlob=new Blob(audioChunks,{type:'audio/wav'});const url=URL.createObjectURL(audioBlob);localStorage.setItem('referenceVoice_'+currentUser,url);referenceVoiceId='savedVoice';document.getElementById('refVoiceStatus').textContent='‚úì Reference voice set! Ready to have conversations.'}function loadReferenceVoice(){const saved=localStorage.getItem('referenceVoice_'+currentUser);if(saved){referenceVoiceId='savedVoice';document.getElementById('refVoiceStatus').textContent='‚úì Reference voice loaded'}}function sendVoiceMessage(){const userInput=document.getElementById('userInput').value;if(!userInput){alert('Please enter your message');return}if(!referenceVoiceId){alert('Please record a reference voice first');return}const historyDiv=document.getElementById('conversationHistory');const userMsg=document.createElement('div');userMsg.className='message user';userMsg.textContent='You: '+userInput;historyDiv.appendChild(userMsg);historyDiv.scrollTop=historyDiv.scrollHeight;document.getElementById('userInput').value='';const grokMsg=document.createElement('div');grokMsg.className='message grok';grokMsg.innerHTML='Grok: <em>Generating response...</em>';historyDiv.appendChild(grokMsg);fetch('/api/generate-story',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({user:currentUser,userInput:userInput,voiceId:referenceVoiceId})}).then(r=>r.json()).then(data=>{if(data.success){grokMsg.innerHTML='Grok: '+data.response;if(data.audio){const audio=new Audio(data.audio);audio.onplay=()=>console.log('Playing response');audio.play().catch(e=>console.error('Playback error:',e))}conversation.push({user:userInput,grok:data.response})}else{grokMsg.innerHTML='Grok: '+data.error}historyDiv.scrollTop=historyDiv.scrollHeight}).catch(e=>{grokMsg.innerHTML='Grok: Error - '+e.message;historyDiv.scrollTop=historyDiv.scrollHeight})}document.addEventListener('DOMContentLoaded',initApp)</script></body></html>
